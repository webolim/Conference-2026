<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Printable Schedule - WEBOLIM Sri Ramayana Satram 2026</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              maroon: '#800000',
              gold: '#D4AF37',
              cream: '#FFFDD0',
              charcoal: '#333333',
            },
            fontFamily: {
              serif: ['"Merriweather"', 'serif'],
              sans: ['Roboto', 'sans-serif'],
            },
          },
        },
      }
    </script>

    <style>
        body { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
        @media print {
            .no-print { display: none !important; }
            .page-break { page-break-before: always; }
            body { background-color: white; }
            a { text-decoration: none; color: inherit; }
        }
        .table-row-striped:nth-child(even) { background-color: #f9f9f9; }
    </style>
</head>
<body class="bg-white text-charcoal font-sans p-4 md:p-8 max-w-[1200px] mx-auto selection:bg-gold selection:text-white">

    <!-- NAVIGATION / PRINT BUTTON -->
    <div class="no-print fixed top-4 right-4 z-50 flex gap-2">
        <a href="index.html" class="bg-charcoal text-white px-4 py-2 rounded shadow hover:bg-black transition">Back to App</a>
        <button onclick="window.print()" class="bg-gold text-white px-4 py-2 rounded shadow hover:bg-yellow-600 transition font-bold">Print / Save PDF</button>
    </div>

    <!-- HEADER SECTION -->
    <header class="text-center mb-12 border-b-4 border-gold pb-8">
        <img id="print-hero-img" class="h-32 md:h-48 mx-auto mb-6 object-contain" alt="Sri Ramayana Satram" />
        
        <h1 class="font-serif font-extrabold text-3xl md:text-5xl text-charcoal mb-4 uppercase tracking-tight">Sri Ramayana Satram <span class="text-gold">&</span><br/>Valmiki Ramayana Conference 2026</h1>
        
        <p class="font-serif text-xl md:text-2xl text-gray-600 italic mb-6">Theme: Recensions / Readings and Commentaries of Valmiki Ramayana</p>
        
        <!-- Key Dates Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto mt-8">
            <div class="border-2 border-gray-200 p-4 rounded-lg bg-gray-50">
                <h3 class="text-gold font-bold uppercase tracking-widest text-sm mb-1">Pre-Conference</h3>
                <p class="font-serif text-xl font-bold text-charcoal">Mar 28 – Apr 3</p>
            </div>
            <div class="border-2 border-gold p-4 rounded-lg bg-gold/10 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-gold text-white text-[10px] px-2 py-0.5 font-bold uppercase">Main Event</div>
                <h3 class="text-gold font-bold uppercase tracking-widest text-sm mb-1">Conference</h3>
                <p class="font-serif text-2xl font-bold text-maroon">Apr 4 – 5</p>
            </div>
            <div class="border-2 border-gray-200 p-4 rounded-lg bg-gray-50">
                <h3 class="text-gold font-bold uppercase tracking-widest text-sm mb-1">Post-Conference</h3>
                <p class="font-serif text-xl font-bold text-charcoal">Apr 6 – 7</p>
            </div>
        </div>
    </header>

    <!-- SCHEDULE SECTION -->
    <section id="schedule-section" class="mb-16">
        <h2 class="font-serif text-3xl font-bold text-charcoal border-l-8 border-gold pl-4 mb-8 uppercase tracking-wide">Detailed Schedule</h2>
        <div id="schedule-content" class="flex flex-col gap-10">
            <!-- JS will populate tables here -->
             <div class="text-center py-10 text-gray-400">Loading Schedule...</div>
        </div>
    </section>

    <div class="page-break"></div>

    <!-- CONFERENCE SPEAKERS -->
    <section id="conf-speakers-section" class="mb-16 pt-8">
        <h2 class="font-serif text-3xl font-bold text-charcoal border-l-8 border-gold pl-4 mb-8 uppercase tracking-wide">Distinguished Speakers</h2>
        <div id="conf-speakers-list" class="grid grid-cols-1 gap-8">
            <!-- JS will populate -->
        </div>
    </section>

    <!-- OTHER SPEAKERS GRID -->
    <section id="other-speakers-section" class="mb-16">
        <h2 class="font-serif text-2xl font-bold text-gray-500 mb-6 border-b border-gray-200 pb-2">All Speakers & Performers</h2>
        <div id="other-speakers-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 text-center">
            <!-- JS will populate -->
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="text-center text-gray-400 text-sm border-t border-gray-200 pt-8 pb-12">
        <p>&copy; 2026 WEBOLIM Trust. All rights reserved.</p>
        <p class="mt-1">www.webolim.org</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('schedule.json');
                const data = await response.json();
                
                // 1. Setup Hero
                document.getElementById('print-hero-img').src = data.assets.heroImage;

                // 2. Render Schedule
                const scheduleContainer = document.getElementById('schedule-content');
                scheduleContainer.innerHTML = '';

                data.schedule.days.forEach(day => {
                    const isConference = day.phase === 'Conference';
                    const headerBg = isConference ? 'bg-charcoal text-white' : 'bg-gray-100 text-charcoal';
                    const borderClass = isConference ? 'border-charcoal' : 'border-gray-200';
                    const themeColor = isConference ? 'text-gold' : 'text-maroon';

                    let tableRows = '';
                    day.events.forEach(event => {
                        // Resolve Speakers
                        const speakerNames = (event.speakerIds || []).map(id => {
                            return data.speakers[id] ? data.speakers[id].name : id;
                        }).join(', ');

                        const highlightClass = event.isConference ? 'font-bold bg-gold/5' : '';

                        tableRows += `
                            <tr class="table-row-striped border-b border-gray-100 ${highlightClass}">
                                <td class="p-3 w-32 md:w-40 align-top text-sm font-bold text-gray-500 border-r border-gray-100">${event.startTime} - ${event.endTime}</td>
                                <td class="p-3 align-top">
                                    <div class="font-bold text-lg text-charcoal leading-tight">${event.title}</div>
                                    ${event.subhead ? `<div class="text-sm text-gray-500 italic mt-0.5">${event.subhead}</div>` : ''}
                                    ${speakerNames ? `<div class="text-sm font-semibold text-maroon mt-1">By: ${speakerNames}</div>` : ''}
                                </td>
                                <td class="p-3 w-32 md:w-48 align-top text-sm text-gray-500 text-right hidden md:table-cell">${event.venue || ''}</td>
                            </tr>
                        `;
                    });

                    const dayHTML = `
                        <div class="break-inside-avoid">
                            <div class="${headerBg} p-4 rounded-t-lg flex flex-col md:flex-row justify-between items-baseline border-b-4 border-gold">
                                <div class="flex items-baseline gap-3">
                                    <span class="font-bold text-gold text-lg uppercase tracking-wider">${day.dayName}</span>
                                    <span class="font-serif text-2xl font-bold">${day.displayDate}</span>
                                </div>
                                <div class="font-serif italic text-lg ${themeColor} mt-1 md:mt-0">${day.theme}</div>
                            </div>
                            <div class="border-l-2 border-r-2 border-b-2 ${borderClass} rounded-b-lg overflow-hidden">
                                <table class="w-full text-left border-collapse">
                                    <thead class="bg-gray-50 text-xs font-bold uppercase text-gray-400 border-b border-gray-200">
                                        <tr>
                                            <th class="p-3">Time</th>
                                            <th class="p-3">Event Details</th>
                                            <th class="p-3 hidden md:table-cell text-right">Venue</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${tableRows}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;
                    scheduleContainer.insertAdjacentHTML('beforeend', dayHTML);
                });

                // 3. Render Speakers
                const confSpeakersList = document.getElementById('conf-speakers-list');
                const otherSpeakersGrid = document.getElementById('other-speakers-grid');
                
                // Separate speakers with bio (Conference/Main) vs without (Performers/Other)
                // Also exclude 'placeholder'
                const allSpeakerIds = Object.keys(data.speakers).filter(id => id !== 'placeholder');
                const confSpeakers = allSpeakerIds.filter(id => data.speakers[id].bio && data.speakers[id].bio.length > 0);
                const otherSpeakers = allSpeakerIds.filter(id => !data.speakers[id].bio || data.speakers[id].bio.length === 0);

                // Render Conference Speakers (List View)
                confSpeakers.forEach(id => {
                    const s = data.speakers[id];
                    const html = `
                        <div class="flex flex-col md:flex-row gap-6 items-start p-6 border border-gray-200 rounded-xl bg-gray-50 break-inside-avoid shadow-sm">
                            <img src="${s.photo}" alt="${s.name}" class="w-32 h-32 md:w-48 md:h-48 rounded-lg object-cover border-2 border-gold shadow-md shrink-0 bg-white">
                            <div>
                                <h3 class="font-serif text-2xl font-bold text-maroon mb-2">${s.name}</h3>
                                <p class="text-gray-700 leading-relaxed text-sm md:text-base text-justify">${s.bio}</p>
                            </div>
                        </div>
                    `;
                    confSpeakersList.insertAdjacentHTML('beforeend', html);
                });

                // Render Other Speakers (Grid View)
                otherSpeakers.forEach(id => {
                    const s = data.speakers[id];
                    const html = `
                        <div class="flex flex-col items-center break-inside-avoid">
                            <div class="w-24 h-24 md:w-28 md:h-28 rounded-full overflow-hidden border-2 border-gray-200 mb-3 shadow-sm bg-gray-100">
                                <img src="${s.photo}" alt="${s.name}" class="w-full h-full object-cover">
                            </div>
                            <h4 class="font-bold text-sm text-charcoal leading-tight">${s.name}</h4>
                        </div>
                    `;
                    otherSpeakersGrid.insertAdjacentHTML('beforeend', html);
                });

            } catch (e) {
                console.error(e);
                document.body.innerHTML = '<p class="text-center text-red-600 p-10">Error loading data. Please run on a server.</p>';
            }
        });
    </script>
</body>
</html>
